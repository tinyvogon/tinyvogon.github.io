---
layout: post 
title:  "SP21 - Blog 1 - Create an alarm based on metrics in AWS Cloudwatch"
date:   2021-02-22 18:34:18 -0700
categories: blog
---

AWS Cloudwatch allows monitoring and notifications of important events in the AWS services you have utilized. To use its notification system, we can create alarms which then send notifications to our preferred endpoints when a certain metric crosses a threshold or in an alarmed state. This tutorial shows how to set up an alarm based on metrics collected by AWS.

1. Go to the Cloudwatch page on AWS console. Click the Alarms dashboard. Click **Create alarm**.
    ![sp-blog1-0](/assets/sp-blog1-0.PNG){:class="img-responsive"}


2. Click on **Select Metric**. The available metrics will be displayed on the bottom half of the screen, navigate to the metrics you want to select and click on it. Once the graph of that metric shows up on the top half of the screen, click **Select Metric**.
    ![sp-blog1-1](/assets/sp-blog1-1.PNG){:class="img-responsive"}


3. Review the information regarding the metric you select. You can choose the mode of statistic as well as the time period in which the alarm will be taken to consideration.
    ![sp-blog1-2](/assets/sp-blog1-2.PNG){:class="img-responsive"}


4. Scroll down to decide the Conditions in which the metric will be regarded as in *alarmed state*. You can choose Static (use a value as a threshold) or Anomaly detection(use a range as a threshold). In my scenario, I want the alarm to trigger when the CPU Utilization of the EC2 instance crosses 95%, so I chose Static value of 95 as the threshold.
    ![sp-blog1-3](/assets/sp-blog1-3.PNG){:class="img-responsive"}


5. In the Additional Configuration, you can choose how to treat the missing data point in the graph. This usually happens when no metric is sent to the colletor. If you want to trigger the alarm when no metric is sent (which usually indicates outage), choose **Treat missing data as bad (breaching threshold).** In my case, I don't want to do anything with the missing data so I keep it as default.
    ![sp-blog1-4](/assets/sp-blog1-4.PNG){:class="img-responsive"}


6. Next, you will set the notification settings. The Alarm State Trigger part determines when the alarm will be triggered, whether it crosses the threshold (In Alarm), within the threshold (OK), or missing data (Insufficient data). After that, you have to choose the SNS topic which consists of the recipients for the alarm. Click **Add notifications** when done.
    ![sp-blog1-5](/assets/sp-blog1-5.PNG){:class="img-responsive"}


7. Enter the name of the alarm and its description if necessary. Click next and review all the settings. Click **Create alarm**.
    ![sp-blog1-6](/assets/sp-blog1-6.PNG){:class="img-responsive"}


Once the alarm is created, it will be at the **Insufficient data** state for a while (~5 minutes if configured properly) before switching to the **OK** state. Now you have a working alarm which will notify you of any instance of the metric crossing a threshold.