---
layout: post 
title:  "SP21 - Blog 9 - Install CodeDeploy Agent on EC2 Linux Ubuntu instance"
date:   2021-04-28 18:34:18 -0700
categories: blog
---

In order to use Code Deploy to automate code delivery process, one needs to first install CodeDeploy agent on the EC2 instance the code is deployed to. In this tutorial, I will show how to install Code Deploy Agent on EC2 Linux Ubuntu 20.04 version.

1. First, log in to the instance via openssh or putty.

2. Make sure **wget** is installed by typing wget and pressing enter. If it says `wget: missing url` it means you already have wget installed. If not following these commands to install wget:

    `sudo apt update`
    `sudo apt install ruby-full`
    `sudo apt install wget`

3. Go to */home/ubuntu* using `cd /home/ubuntu`. Enter the following command to install codedeploy agent:

    `wget https://bucket-name.s3.region-identifier.amazonaws.com/latest/install`

    **Note:** Replace *bucket-name* and *region-identifier* with the approriate bucket name and region for your EC2 instance. To see the bucket name available, visit this [link](https://docs.aws.amazon.com/codedeploy/latest/userguide/resource-kit.html#resource-kit-bucket-names). 

    My sample EC2 is in the us-west-2 region, where the resource bucket name is aws-codedeploy-us-west-2. Here is how it looks when you execute the command with the approriate bucket name and region identifier. 

    ![sp-blog9-0](/assets/sp-blog9-0.PNG){:class="img-responsive"}

4. Once the download is done, execute `ls` to check if a file called **install* exists in */home/ubuntu*. Change the ACL permission of the file:

    `chmod +x /install`

5. For Ubuntu 20.04, execute this command to start the installation of the latest version of CodeDeploy agent:

    `sudo ./install auto > /tmp/logfile`



6. Once the installation is finished, the CodeDeploy agent should start running automatically. Use the following command to check the status of the agent:

    `sudo service codedeploy-agent status`

    ![sp-blog9-1](/assets/sp-blog9-1.png){:class="img-responsive"}

**Note**: If CodeDeploy-agent is inactive, use the following command to start the agent:
    `sudo service codedeploy-agent start`
